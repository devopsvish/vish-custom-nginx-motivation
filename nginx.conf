# Main context (this is the outermost block)

# Define the events block - it is required by Nginx
events {
    worker_connections 1024;  # Defines the maximum number of simultaneous connections per worker process
}

# The http block where server and other settings reside
http {
    # Include mime types for proper content type handling
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    # You can specify other global HTTP settings here
    access_log /var/log/nginx/access.log;
    access_log /dev/stdout;

    error_log /var/log/nginx/error.log warn;
    error_log /dev/stderr warn;

    # The server block to define the configuration for your server
    server {
        listen       0.0.0.0:5555;
        server_name  localhost;

        # Root directory for serving files
        root /usr/share/nginx/html;
        index intro.html;

        # Main location block for the root - serves intro.html (home page)
        location = / {
            try_files /intro.html =404;
        }

        # Quotes page
        location = /quotes {
            try_files /index.html =404;
        }

        # About page
        location = /about {
            try_files /about.html =404;
        }

        # Contact page
        location = /contact {
            try_files /contact.html =404;
        }

        # Keep .html routes for backward compatibility (redirect to clean URLs)
        location /index.html {
            return 301 /quotes;
        }

        location /intro.html {
            return 301 /;
        }

        location /about.html {
            return 301 /about;
        }

        location /contact.html {
            return 301 /contact;
        }

        # Catch-all for other files
        location / {
            try_files $uri $uri.html $uri/ =404;
        }

        # Error page handling
        error_page 404 /404.html;
        location = /404.html {
            internal;
        }
    }
}
